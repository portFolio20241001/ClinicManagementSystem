%% Smart Clinic – System Context (C4 level-1)
%% 人物 = 丸角矩形 / システム = 角丸矩形

C4Context
title Smart Clinic – Context Diagram

Person(admin, "Admin", "システム運用者（医師登録など）")
Person(doctor, "Doctor", "診療・処方箋登録を行う医師")
Person(patient, "Patient", "予約・支払いを行う患者")

System_Boundary(s1, "Smart Clinic") {
  System_Web(spa, "Web Frontend (SPA)", "HTML/CSS/JS – Tailwind")
  System_API(api, "Spring Boot API", "JWT 認証付き REST")
  System_DB(mysql, "MySQL", "ユーザー / 予約 / 支払い など RDB")
  System_DB(mongo, "MongoDB", "処方箋・ログ<br/>非構造データ")
}

Rel(admin   , spa , "ブラウザ操作")
Rel(doctor  , spa , "ブラウザ操作")
Rel(patient , spa , "ブラウザ操作")

Rel(spa, api   , "REST/JSON + JWT", "HTTPS 443")
Rel(api, mysql , "JPA (Hibernate)")
Rel(api, mongo , "Spring Data Mongo")

Boundary_Ext(email, "External Services") {
  System_Ext(ses, "Email Service", "AWS SES / SendGrid など")
}
Rel(api, ses, "予約確認メール")

SHOW_LEGEND()
